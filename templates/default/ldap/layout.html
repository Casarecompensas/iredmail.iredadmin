{#
#---------------------------------------------------------------------
# This file is part of iRedAdmin-OSE, which is official web-based admin
# panel (Open Source Edition) for iRedMail.
#
# iRedMail is an open source mail server solution for Red Hat(R)
# Enterprise Linux, CentOS, Debian and Ubuntu.
#
# iRedAdmin-OSE is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# iRedAdmin-OSE is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with iRedAdmin-OSE.  If not, see <http://www.gnu.org/licenses/>.
#---------------------------------------------------------------------
#}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>{% block title %}{%endblock%}</title>

    {# CSS #}
    <link rel="stylesheet" type="text/css" media="screen" href="{{ctx.homepath}}/static/{{skin}}/css/iredadmin.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="{{ctx.homepath}}/static/{{skin}}/css/iredadmin_cs.css" />
    <!--[if lte IE 6]>
        <link rel="stylesheet" type="text/css" href="{{ctx.homepath}}/static/{{skin}}/css/ie6.css" />
    <![endif]-->
    <!--[if IE 7]>
        <link rel="stylesheet" type="text/css" href="{{ctx.homepath}}/static/{{skin}}/css/ie7.css" />
    <![endif]-->
    {% block extraHeader %}{% endblock extraHeader %}

</head>
<body>
    <div id="brd-wrap" class="brd">
    <div id="brd-message" class="brd-page basic-page">
        {% if session.get('username') is not none %}

            {# Header #}
            <div id="brd-head" class="gen-content">
                <p class="options">
                    <span>{{ _('Logged in as %s.') |format(session.get('username')) }}</span>
                    <span><a href="{{ctx.homepath}}/profile/admin/general/{{session.get('username')}}">{{ _('Preferences') }}</a></span>
                    <span><a href="{{ctx.homepath}}/logout">{{ _('Logout') }}</a></span>
                </p>
                {# Preferences #}
                <p id="brd-title"><a href="{{ctx.homepath}}/">iRedAdmin</a></p>
                <p id="brd-desc">{{_('iRedMail Management') }}</p>
            </div>

            {# Main navigation #}
            <div class="admin-menu gen-content">
                <ul>
                    <li class="{% block navlinks_active_dashboard %}normal{% endblock %}"><a href="{{ctx.homepath}}/dashboard">{{ _('Dashboard') }}</a></li>
                    <li class="{% block navlinks_active_domains %}normal{% endblock %}"><a href="{{ctx.homepath}}/domains">{{ _('Domains') }}</a></li>
                    <li class="{% block navlinks_active_users %}normal{% endblock %}"><a href="{{ctx.homepath}}/users">{{ _('Users') }}</a></li>
                    {# Display extra menus for global admin. #}
                    {% if session.get('domainGlobalAdmin') == 'yes' %}
                        <li class="{% block navlinks_active_admins %}normal{% endblock %}"><a href="{{ctx.homepath}}/admins">{{ _('Admins') }}</a></li>
                    {% endif %}
                </ul>
            </div>

            {% block submenu %}
            <div id="brd-visit" class="admin-submenu gen-content">
                <p id="welcome">{% block id_welcome %}{% endblock id_welcome %}</p>
                <p id="visit-links" class="options">{% block id_visit_links %}{% endblock id_visit_links %}</p>
            </div>
            {% endblock submenu %}
        {% endif %}

        <div id="main" class="main-content">
            {% block main %}{% endblock main %}
        </div>

        {% block footer %}
        <div id="footer">
            &copy 2009
            | <a href="http://www.iredmail.org/">iRedMail Project</a>
            {% if session.get('domainGlobalAdmin') == 'yes' %}
                | <a href="mailto:michaelbibby@gmail.com">{{ _('Get support') }}</a>
            {% else %}
                | <a href="mailto:{{session.get('webmaster')}}">{{ _('Get support') }}</a>
            {% endif %}
        </div>
        {% endblock footer %}
    </div>
    </div>

    {#
        : Basic javascript functions.
    #}
    <script type="text/javascript">
        checked=false;
        function checkAll(id) {
            var aa= document.getElementById(id);
            if (checked == false) {
                checked = true
            } else {
                checked = false
            }
            for (var i =0; i < aa.elements.length; i++) {
                aa.elements[i].checked = checked;
            }
        }

        function changeUrl(domain, baseurl) {
            if ( domain.options[domain.selectedIndex].value != 'none' ) {
                location.href = baseurl + domain.options[domain.selectedIndex].value;
            }
        }
    </script>

    {#
        Load javascript files.
        Placing javascript files at the bottom, make the page load as quickly as possible.
    #}
    {% block js %}
    <script type="text/javascript" src="{{ctx.homepath}}/static/js/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="{{ctx.homepath}}/static/js/jquery.tooltip.js"></script>
    {% endblock js %}

    {% block js_tablesorter %}
    <script src="{{ctx.homepath}}/static/js/jquery.tablesorter.js" type="text/javascript" ></script>
    {% endblock js_tablesorter %}

    {# ---- JS ---- #}
    {% block jquery_docoment_ready %}
    <script type="text/javascript">
        $(document).ready(function() {
            $("a,input,img").ToolTipDemo('#8dbdd8');
            {% block jquery_snippet_sorter %}
                $("#account_list").tablesorter( {sortList: [[0,0]]} );
            {% endblock jquery_snippet_sorter %}
            {% block jquery_snippets %}{% endblock jquery_snippets %}
        });
    </script>
    {% endblock jquery_docoment_ready %}

</body>
</html>
