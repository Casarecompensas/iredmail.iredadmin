{% extends "layout.html" %}

{% block title %}{{ _('Login to manage your mail domains & employees') }}{% endblock %}
{% block js %}{% endblock %}
{% block js_tablesorter %}{% endblock %}
{% block jquery_docoment_ready %}{% endblock jquery_docoment_ready %}

{% block css %}
{# Override default css style, center the login page. #}
<style type="text/css">
    body {
        text-align: center;
    }
    #brd-wrap {
        margin-left: auto;
        margin-right: auto;
        width: 40em;
        text-align: left;
    }
</style>
{% endblock %}

{% block main %}
<div id="brd-main">
    <div class="main-head">
        <h2 class="hn"><span>{{ _('Login to manage your mail domains & employees') |title }}</span></h2>
    </div>

    {# Show error msg if available #}
    {% if msg is defined and msg is not sameas none %}
    <div class="ct-box warn-box">
        <div class="error"><strong>{{ _('Error:') }}</strong>
        {% if msg == 'INVALID_CREDENTIALS' %}
            {{ _('Username or password is incorrect.') }}
        {% elif msg == 'INVALID_USERNAME' %}
            {{ _('Username must be an valid email address.') }}
        {% elif msg == 'loginRequired' %}
            {{ _('Login required') }}
        {% elif msg == 'EMPTY_USER_PW' %}
            {{ _('Username or password is empty.') }}
        {% elif msg == 'SERVER_DOWN' %}
            {{ _('Server is down, Please contact <a href="mailto:%s">webmaster</a> to solve it.' % webmaster ) }}
        {% elif msg is sameas false %}
            {{ _('Authentication failed.') }}
        {% else %}
            {{msg}}
        {% endif %}
        </div>
    </div>
    {% endif %}

    {# Show login form #}
    <div class="main-frm">
        <div class="content-head">
            <p class="important">{{ _('All fields labelled <em>(Required)</em> must be completed before the form is submitted.') }}</p>
        </div>

        <form class="frm-form" method="post" action="{{ctx.homepath}}/login">
            <div class="frm-group">
                <div class="sf-set">
                    <div class="sf-box text required">
                        <label><span>{{ _('Username')}} <em>{{ _('(Required)')}}</em></span><small>{{ _('Must be a valid domain admin email address.') }}</small></label><br />
                        <span class="fld-input"><input type="text" name="username" size="35" /></span>
                    </div>
                </div>

                <div class="sf-set">
                    <div class="sf-box text required">
                        <label><span>{{ _('Password') }} <em>{{ _('(Required)') }}</em></span></label><br />
                        <span class="fld-input"><input type="password" name="password" size="35" /></span>
                    </div>
                </div>

                <div class="sf-set">
                    <div class="sf-box checkbox">
                        <span class="fld-input"><input type="checkbox" name="save_pass" value="yes" /></span>
                        <label><span>{{ _('Remember me')}} </span>{{ _('Log me in automatically each time I visit.') }}</label>
                    </div>
                </div>
            </div>

            <div class="frm-buttons">
                <span class="submit"><input type="submit" value="{{ _('Login') }}" /></span>
            </div>
        </form>
    </div>
</div>
{% endblock main %}

{% block footer %}{%endblock%}
